---
title: "Debug Bridge"
description: "Cross-resource logging integration for ecosystem resources"
---

# TabletDebugBridge

`shared/debug_bridge.lua` provides a bridge for external resources to send logs to the tablet's debug panel.

## Overview

This module allows other resources in the ecosystem (like `mechanic-spec`) to:
- Send logs to the tablet's debug panel
- Track errors across resources
- Use centralized telemetry

## Server-Side API

### TabletDebugBridge.sendLog

Send a log entry to the tablet's debug system:

```lua
TabletDebugBridge.sendLog(level, levelName, category, message, data)
```

| Parameter | Type | Description |
|-----------|------|-------------|
| `level` | number | Log level from `TabletConstants.LOG_LEVELS` |
| `levelName` | string | Level name (TRACE, DEBUG, INFO, WARN, ERROR, FATAL) |
| `category` | string | Category for filtering |
| `message` | string | Log message |
| `data` | table? | Optional additional data |

### TabletDebugBridge.createLogger

Create a logger instance for an external resource:

```lua
local logger = TabletDebugBridge.createLogger('mechanic-spec')

logger.info('PARTS', 'Part installed successfully')
logger.error('DATABASE', 'Failed to save', { error = err })
```

**Returns:** A logger object with methods: `trace`, `debug`, `info`, `warn`, `error`, `fatal`

## Client-Side Events

### dusa_tablet:debug:externalClientLog

External resources can send client logs via this event:

```lua
TriggerEvent('dusa_tablet:debug:externalClientLog', {
    timestamp = GetGameTimer(),
    level = 3,
    levelName = 'INFO',
    category = 'MY_RESOURCE',
    message = 'Something happened',
    data = nil,
    side = 'client',
    resource = GetCurrentResourceName()
})
```

## Cross-Resource Error Notifications

### dusa_tablet:debug:crossResourceError

Receive error notifications from other resources:

```lua
RegisterNetEvent('dusa_tablet:debug:crossResourceError', function(errorData)
    -- Shows notification in tablet debug panel
    -- errorData: { resource, level, message, timestamp }
end)
```

## Integration Example

### In External Resource (Server)

```lua
-- mechanic-spec/server/init.lua

-- Get or create bridge
local function getTabletBridge()
    local bridge = exports['dusa_tablet']:getDebugBridge()
    if bridge then
        return bridge.createLogger(GetCurrentResourceName())
    end
    return nil
end

local Logger = getTabletBridge()

-- Use the logger
if Logger then
    Logger.info('ORDERS', 'Work order created', { orderId = 123 })
end
```

### In External Resource (Client)

```lua
-- Send log to tablet
TriggerEvent('dusa_tablet:debug:externalClientLog', {
    level = TabletConstants.LOG_LEVELS.INFO,
    levelName = 'INFO',
    category = 'MECHANIC',
    message = 'Vehicle inspection started',
    resource = GetCurrentResourceName()
})
```

## Error Capture Configuration

Configure which resources' errors are captured in `config/config.lua`:

```lua
Config.ErrorCapture = {
    Enabled = true,
    CaptureAll = false,  -- true = capture all resources
    Resources = {        -- Whitelist if CaptureAll = false
        'dusa_tablet',
        'mechanic-spec',
    }
}
```

<Note>
Only resources in the whitelist will have their errors displayed in the tablet's debug panel.
</Note>
